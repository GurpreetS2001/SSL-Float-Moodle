{% extends 'mainpage.html' %}

{% block title %} {{ course.name }} {% endblock %} <!--dhvanit-->

{% block content %}
{% if user.is_authenticated and user == request.user%}
<div id="main">
<h1>{{course.name}}</h1>
<h3>{{course.code}}</h3>
<hr>
<h4><a href="{% url 'course_members' name=course.name %}">View course members</a></h4>  <!--dhvanit-->

<hr>
<h4>
  <a href="{% url 'course_forum' name=course.name %}">Discussion Forum</a>
  {% if relation.is_teacher %}
    {% if course.forums_enabled %}<a href="{% url 'disable_forum' name=course.name %}">(Disable)</a>
    {% else %}<a href="{% url 'enable_forum' name=course.name %}">(Enable)</a>
    {% endif %}
  {% endif %}
</h4>  <!--dhvanit-->

<hr>  <!--dhvanit-->
{% if privileges.can_create_assignments %}  <!--dhvanit-->
<h4><a href="{% url 'add_assign' name=course.name %}">Create Assignment</a></h4>
{% endif %}

{% for assignment in assignments %}
    <hr>
    <div class="card-body">
      <h5 class="card-title">Due by {{assignment.deadline}}</h5>
      <p class="card-text">{{assignment.prob_description}}</p>
      <a href="{{ assignment.problemfile.url }}" download>Problem statement</a><br>
      <a href="{% url 'view_assign' name=course.name id=assignment.pk %}">View Assignment</a>
    </div>
  
{% endfor %}
<hr>

{% if privileges.can_create_lectures %} <!--dhvanit-->
<div class="card" style="width: 90rem; float:left; margin: auto; border: 3px solid gray;">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h5>Upload new lecture</h5>
        {{ form.as_p }}
        <input type="submit" value="Upload">
        </form>
    </div>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br> <!--dhvanit-->
{% endif %}

<h3>Lectures:</h3>  <!--dhvanit-->
{% for lecture in lectures %}
    <hr>
    <div class="card-body">
      <h5 class="card-title">{{lecture.title}}</h5>
      <p class="card-text">{{lecture.description}}</p>
      <a href="{{ lecture.lecturenotes.file.url }}" download>Lecture Notes</a>
    </div>
  
{% endfor %}
<hr>

</div>
{% else %}
<div class="alert alert-danger" role="alert" style="margin-left: 20%; margin-top: 20px;">
    Invalid Access Attempt!
  </div>
{% endif %}
{% endblock %}